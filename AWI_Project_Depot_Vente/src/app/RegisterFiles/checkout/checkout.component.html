<div class="checkout-container">
    <h2>Finaliser l'achat</h2>

    <!-- Barre de recherche pour trouver un acheteur existant -->
    <label for="buyerSearch">Rechercher un acheteur :</label>
    <input type="text" id="buyerSearch" placeholder="Entrez un nom..." (input)="onSearchBuyer($event)" />

    <!-- Liste des acheteurs filtrés -->
    @if(filteredBuyers.length > 0){
    <ul>
        @for(buyer of filteredBuyers; track buyer.id){
        <li (click)="onBuyerSelect(buyer)">
            {{ buyer.firstName }} {{ buyer.name }} - {{ buyer.email }}
        </li>
        }
    </ul>
    }

    <!-- Acheteur sélectionné -->
    @if(selectedBuyer){
    <div class="selected-buyer">
        <h3>Acheteur sélectionné :</h3>
        <p><strong>Nom :</strong> {{ selectedBuyer.firstName }} {{ selectedBuyer.name }}</p>
        <p><strong>Email :</strong> {{ selectedBuyer.email }}</p>
        <p><strong>Téléphone :</strong> {{ selectedBuyer.phoneNumber }}</p>
        <p><strong>Adresse :</strong> {{ selectedBuyer.address }}</p>
    </div>
    }

    <!-- Bouton pour ajouter un nouvel acheteur -->
    <button (click)="navigateToAddBuyer()">Ajouter un nouvel acheteur</button>

    <!-- Bouton de validation -->
    <button [disabled]="!selectedBuyer || cart.length === 0" (click)="onSubmit()">Valider l'achat</button>
</div>